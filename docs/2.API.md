# API 文档

本文档详细介绍了 FastAPI-Vue3-Sample 项目的 API 接口。所有 API 遵循 RESTful 设计规范，返回 JSON 格式数据。

## API 基本信息

- **基础 URL**: `/api`
- **内容类型**: `application/json`
- **文档**: 项目运行后可访问 `/docs` 或 `/redoc` 查看自动生成的 API 文档

## 产品管理 API

### 1. 获取所有产品

获取系统中所有产品的列表。

- **URL**: `/api/products`
- **方法**: `GET`
- **URL 参数**: 无
- **成功响应**:
  - **状态码**: 200
  - **内容示例**:
  ```json
  [
    {
      "id": 1,
      "name": "产品1",
      "description": "这是产品1的描述",
      "price": 99.99,
      "in_stock": true
    },
    {
      "id": 2,
      "name": "产品2",
      "description": "这是产品2的描述",
      "price": 199.99,
      "in_stock": false
    }
  ]
  ```

### 2. 创建产品

创建新的产品记录。

- **URL**: `/api/products`
- **方法**: `POST`
- **请求体**:
  ```json
  {
    "name": "新产品",
    "description": "这是新产品的描述",
    "price": 299.99,
    "in_stock": true
  }
  ```
- **成功响应**:
  - **状态码**: 201
  - **内容示例**:
  ```json
  {
    "id": 3,
    "name": "新产品",
    "description": "这是新产品的描述",
    "price": 299.99,
    "in_stock": true
  }
  ```
- **错误响应**:
  - **状态码**: 422
  - **内容示例**:
  ```json
  {
    "detail": [
      {
        "loc": ["body", "name"],
        "msg": "field required",
        "type": "value_error.missing"
      }
    ]
  }
  ```

### 3. 获取特定产品

根据产品 ID 获取特定产品的详细信息。

- **URL**: `/api/products/{product_id}`
- **方法**: `GET`
- **URL 参数**:
  - `product_id`: 产品 ID（整数）
- **成功响应**:
  - **状态码**: 200
  - **内容示例**:
  ```json
  {
    "id": 1,
    "name": "产品1",
    "description": "这是产品1的描述",
    "price": 99.99,
    "in_stock": true
  }
  ```
- **错误响应**:
  - **状态码**: 404
  - **内容示例**:
  ```json
  {
    "detail": "产品不存在"
  }
  ```

### 4. 更新产品

更新特定产品的信息。

- **URL**: `/api/products/{product_id}`
- **方法**: `PUT`
- **URL 参数**:
  - `product_id`: 产品 ID（整数）
- **请求体**:
  ```json
  {
    "name": "更新后的产品名称",
    "description": "更新后的产品描述",
    "price": 399.99,
    "in_stock": false
  }
  ```
- **成功响应**:
  - **状态码**: 200
  - **内容示例**:
  ```json
  {
    "id": 1,
    "name": "更新后的产品名称",
    "description": "更新后的产品描述",
    "price": 399.99,
    "in_stock": false
  }
  ```
- **错误响应**:
  - **状态码**: 404
  - **内容示例**:
  ```json
  {
    "detail": "产品不存在"
  }
  ```

### 5. 删除产品

删除特定的产品记录。

- **URL**: `/api/products/{product_id}`
- **方法**: `DELETE`
- **URL 参数**:
  - `product_id`: 产品 ID（整数）
- **成功响应**:
  - **状态码**: 204
  - **内容**: 无
- **错误响应**:
  - **状态码**: 404
  - **内容示例**:
  ```json
  {
    "detail": "产品不存在"
  }
  ```

## 数据模型

### 产品模型

```python
class Product(BaseModel):
    id: int
    name: str
    description: Optional[str] = None
    price: float
    in_stock: bool = True

class ProductCreate(BaseModel):
    name: str
    description: Optional[str] = None
    price: float
    in_stock: bool = True

class ProductUpdate(BaseModel):
    name: Optional[str] = None
    description: Optional[str] = None
    price: Optional[float] = None
    in_stock: Optional[bool] = None
```

## 错误处理

API 使用标准的 HTTP 状态码指示请求状态：

- **200 OK**: 请求成功
- **201 Created**: 资源创建成功
- **204 No Content**: 请求成功处理，无返回内容
- **400 Bad Request**: 请求参数错误
- **404 Not Found**: 请求的资源不存在
- **422 Unprocessable Entity**: 请求参数验证失败
- **500 Internal Server Error**: 服务器内部错误

## 认证与授权

当前版本的 API 不要求认证。未来版本可能会添加基于 JWT 的认证机制。

## 请求限制

API 没有明确的请求频率限制，但建议客户端实现合理的请求策略，避免过于频繁的请求。

## API 版本控制

当前 API 版本为 v1，未来版本可能会通过 URL 路径或请求头标识版本信息。
