# 前端文档

本文档详细介绍了 FastAPI-Vue3-Sample 项目的前端架构、组件和使用的技术栈。

## 技术栈

- **框架**: Vue 3
- **构建工具**: Vite
- **运行时/包管理**: Bun
- **HTTP 客户端**: Axios
- **样式**: 原生 CSS / 可集成 TailwindCSS

## 目录结构

```
frontend/
├── components/      # Vue 组件
│   ├── HelloWorld.vue
│   └── ProductList.vue
├── services/        # API 服务和工具函数
└── assets/          # 静态资源
```

## 主要组件

### 1. ProductList.vue

产品列表组件，提供对产品的增删改查功能。

#### 功能:

- 展示所有产品列表
- 添加新产品
- 编辑现有产品
- 删除产品
- 错误处理和加载状态

#### 核心代码结构:

```vue
<script setup>
import { ref, onMounted } from "vue";
import { productApi } from "../services/api";

// 产品列表状态
const products = ref([]);
const loading = ref(false);
const error = ref(null);

// 表单状态
const formData = ref({
  id: null,
  name: "",
  description: "",
  price: 0,
  in_stock: true,
});
const showForm = ref(false);
const editMode = ref(false);

// 加载产品数据
const fetchProducts = async () => {
  // ...
};

// 添加/编辑/删除产品方法
const openCreateForm = () => {
  /* ... */
};
const openEditForm = (product) => {
  /* ... */
};
const saveProduct = async () => {
  /* ... */
};
const deleteProduct = async (id) => {
  /* ... */
};

// 组件挂载时获取数据
onMounted(() => {
  fetchProducts();
});
</script>

<template>
  <!-- 产品管理界面 -->
  <div class="products-container">
    <!-- 头部和按钮 -->
    <!-- 产品列表表格 -->
    <!-- 添加/编辑表单 -->
  </div>
</template>
```

### 2. HelloWorld.vue

示例组件，展示基本的 Vue 3 功能。

#### 功能:

- 展示欢迎信息
- 计数器示例
- 展示 Vue 3 和 Vite 的基本用法

## API 服务

前端使用 API 服务模块与后端通信，位于 `frontend/services/api.js`。

### 功能:

- 封装 Axios 请求
- 提供产品 API 方法
- 统一错误处理

### 核心结构:

```javascript
import axios from "axios";

// 创建 Axios 实例
const apiClient = axios.create({
  baseURL: "/api",
  headers: {
    "Content-Type": "application/json",
  },
});

// 产品 API 服务
export const productApi = {
  // 获取所有产品
  getProducts() {
    return apiClient.get("/products");
  },

  // 获取单个产品
  getProduct(id) {
    return apiClient.get(`/products/${id}`);
  },

  // 创建产品
  createProduct(product) {
    return apiClient.post("/products", product);
  },

  // 更新产品
  updateProduct(id, product) {
    return apiClient.put(`/products/${id}`, product);
  },

  // 删除产品
  deleteProduct(id) {
    return apiClient.delete(`/products/${id}`);
  },
};
```

## 路由配置

当前项目使用简单的单页面应用设计，没有使用 Vue Router。如果需要扩展为多页面应用，可以集成 Vue Router 来管理路由。

## 状态管理

当前项目使用组件级的状态管理 (使用 `ref` 和 `reactive`)。如果需要扩展应用规模，可以考虑集成 Pinia 或 Vuex 进行集中式状态管理。

## 表单处理

表单使用 Vue 3 的响应式系统进行双向绑定，主要特点:

- 使用 `v-model` 进行双向数据绑定
- 表单验证通过前端和后端共同完成
- 提交前进行简单验证
- 错误信息显示

## 错误处理

前端的错误处理策略:

1. API 请求错误:

   - 捕获请求异常
   - 显示友好的错误提示
   - 记录错误到控制台

2. 表单验证错误:
   - 前端基本验证
   - 显示后端返回的验证错误

## UI/UX 设计

界面设计采用简洁的风格:

- 响应式布局，适应不同屏幕尺寸
- 表格展示数据列表
- 模态框进行数据编辑
- 加载状态展示
- 错误提示组件

## 构建和部署

### 开发环境

```bash
# 启动开发服务器
bun run dev
```

### 生产构建

```bash
# 构建生产版本
bun run build
```

构建输出位于 `dist` 目录，可部署到任何静态文件服务器。

## 性能优化

- 使用 Vue 3 的组合式 API 提高性能
- 按需加载组件
- 避免不必要的 API 请求
- 使用 Vue 的生命周期钩子合理管理资源

## 未来扩展

1. 添加用户认证和授权
2. 集成更多页面和功能模块
3. 添加更复杂的状态管理
4. 集成测试框架
5. 增强 UI 设计和用户体验
